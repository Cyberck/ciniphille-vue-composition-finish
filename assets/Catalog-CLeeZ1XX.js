import{r as w,b as k,o as l,d as u,w as C,e as S,f as s,u as n,i as b,t as v,g as x,h as r,j as B,k as L,l as D,c as m,F as g,m as E,n as y,L as F}from"./index-C1o3JTeT.js";const I={alt:"",class:"main__catalog-list-item-img"},P={class:"main__catalog-list-item-title"},$={__name:"CatalogItem",props:{item:Object,type:String},setup(t){const e=t;return console.log("CatalogItem item:",e.item),console.log("CatalogItem type:",e.type),(i,c)=>{const o=w("router-link"),a=k("lazy");return l(),u(o,{to:t.type+"/"+t.item.id,class:"main__catalog-list-item"},{default:C(()=>[S(s("img",I,null,512),[[a,n(b)+t.item.backdrop_path]]),s("h2",P,v(t.item.name||t.item.title),1)]),_:1},8,["to"])}}},j={key:0,class:"main__catalog"},z={class:"container"},A={class:"main__catalog-title"},H={class:"main__catalog-list"},T={__name:"Catalog",props:{type:String},setup(t){const e=t,i=x();let c=r(1),o=r([]),a=r(!1);const p=async()=>{if(!a.value){a.value=!0,await i.getPopular({type:e.type,page:c.value});const _=e.type==="movie"?i.popularMovies:e.type==="tv"?i.popularTvs:"";o.value.push(..._),setTimeout(()=>a.value=!1,1e3),c.value++}};B(()=>{window.addEventListener("scroll",h)});const h=()=>{window.scrollY+window.innerHeight>=document.body.scrollHeight&&p()};L(()=>{e.type&&p()});const f=D(()=>e.type==="movie"?"All films":e.type==="tv"?"All serials":"");return(_,M)=>(l(),m(g,null,[n(o)?(l(),m("div",j,[s("div",z,[s("h2",A,v(f.value),1),s("div",H,[(l(!0),m(g,null,E(n(o),d=>(l(),u($,{key:d.id,item:d,type:t.type},null,8,["item","type"]))),128))])])])):y("",!0),n(a)?(l(),u(F,{key:1})):y("",!0)],64))}};export{T as _};
//# sourceMappingURL=Catalog-CLeeZ1XX.js.map
