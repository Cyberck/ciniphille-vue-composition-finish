{"version":3,"file":"SearchPage-BY6bFwbI.js","sources":["../../src/stores/search.js","../../src/components/Search/Search.vue"],"sourcesContent":["import axios from \"axios\";\nimport {apiKey} from \"@/apiUrl.js\";\nimport {defineStore} from \"pinia\";\n\nexport const useSearch = defineStore('search', {\n    state: () => ({\n        url: 'https://api.themoviedb.org/3',\n        result: null,\n        error: ''\n    }),\n    actions: {\n        async searching(text) {\n            try {\n                let response = await axios.get(\n                    `${this.url}/search/multi?api_key=${apiKey}&language=en-US&query=${text}`)\n                     this.result = response.data.results\n                     console.log(this.result)\n                ;\n            } catch (error) {\n                console.error(\"Error while retrieving upcoming movies: \" + error.message);\n            }\n        }\n    }\n});\n","<template>\n  <div class=\"main__search\">\n    <div class=\"container\">\n      <input\n          class=\"main__search-input\"\n          placeholder=\"Search films and serials...\"\n          type=\"text\"\n          v-model=\"text\"\n      >\n      <div class=\"main__search-list\" v-if=\"searchArray\">\n        <SearchContent\n            v-for=\"item in searchArray\"\n            :key=\"item.id\"\n            :item=\"item\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport {computed, ref, watch} from \"vue\";\nimport './Search.scss'\nimport SearchContent from \"@/components/Search/SearchContent.vue\";\nimport {useSearch} from \"@/stores/search.js\";\n\nconst searchStore = useSearch();\n\nconst text = ref('')\n\nconst searchArray = computed(() => searchStore.result);\n\nlet timer = null;\n\nwatch(text, (val) => {\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    searchStore.searching(val);\n  }, 500);\n})\n\n</script>\n"],"names":["useSearch","defineStore","text","response","axios","apiKey","error","searchStore","ref","searchArray","computed","timer","watch","val"],"mappings":"ylBAIaA,EAAYC,EAAY,SAAU,CAC3C,MAAO,KAAO,CACV,IAAK,+BACL,OAAQ,KACR,MAAO,EACf,GACI,QAAS,CACL,MAAM,UAAUC,EAAM,CAClB,GAAI,CACA,IAAIC,EAAW,MAAMC,EAAM,IACvB,GAAG,KAAK,GAAG,yBAAyBC,CAAM,yBAAyBH,CAAI,EAAE,EACxE,KAAK,OAASC,EAAS,KAAK,QAC5B,QAAQ,IAAI,KAAK,MAAM,CAE/B,OAAQG,EAAO,CACZ,QAAQ,MAAM,2CAA6CA,EAAM,OAAO,CACxF,CACA,CACA,CACA,CAAC,iHCGD,MAAMC,EAAcP,EAAW,EAEzBE,EAAOM,EAAI,EAAE,EAEbC,EAAcC,EAAS,IAAMH,EAAY,MAAM,EAErD,IAAII,EAAQ,KAEZ,OAAAC,EAAMV,EAAOW,GAAQ,CACnB,aAAaF,CAAK,EAClBA,EAAQ,WAAW,IAAM,CACvBJ,EAAY,UAAUM,CAAG,CAC1B,EAAE,GAAG,CACR,CAAC"}