{"version":3,"file":"Catalog-BZlSULNQ.js","sources":["../../src/components/Catalog/CatalogItem.vue","../../src/components/Catalog/Catalog.vue"],"sourcesContent":["<template>\n  <router-link :to=\" type + '/' + item.id \" class=\"main__catalog-list-item\">\n    <img v-lazy=\"imgUrlFull + item.backdrop_path\" alt=\"\" class=\"main__catalog-list-item-img\">\n    <h2 class=\"main__catalog-list-item-title\">{{item.name || item.title}}</h2>\n  </router-link>\n</template>\n\n<script setup>\nimport {imgUrlFull} from \"@/apiUrl.js\";\n\nconst props = defineProps({\n  item: Object,\n  type: String\n})\n\nconsole.log('CatalogItem item:', props.item); // Shu yerda konsolga chiqaramiz\nconsole.log('CatalogItem type:', props.type);\n</script>\n","<template>\n  <div class=\"main__catalog\" v-if=\"allContent\">\n    <div class=\"container\">\n        <h2 class=\"main__catalog-title\">\n          {{ title }}\n        </h2>\n      <div class=\"main__catalog-list\">\n        <CatalogItem\n          v-for=\"item in allContent\"\n          :key=\"item.id\"\n          :item=\"item\"\n          :type=\"type\"\n        />\n      </div>\n    </div>\n  </div>\n  <Loader v-if=\"loading\"/>\n</template>\n\n<script setup>\nimport { computed, watchEffect, ref, onMounted } from \"vue\";\nimport CatalogItem from \"@/components/Catalog/CatalogItem.vue\";\nimport { usePopular } from \"@/stores/popular.js\";\nimport \"./Catalog.scss\";\nimport Loader from \"@/components/UI/Loader.vue\";\n\nconst props = defineProps({\n  type: String,\n});\n\nconst popularStore = usePopular();\n\nlet currentPage = ref(1)\nlet allContent = ref([])\nlet loading = ref(false)\n\nconst getContent = async () => {\n  if(!loading.value) {\n    loading.value = true\n    await popularStore.getPopular({ type: props.type, page: currentPage.value });\n    const popular =\n      props.type === \"movie\"\n          ? popularStore.popularMovies\n          : props.type === \"tv\"\n              ? popularStore.popularTvs\n              : ''\n    allContent.value.push(...popular)\n    setTimeout(() => loading.value = false, 1000);\n    currentPage.value++\n  }\n}\n\nonMounted(() => {\n  window.addEventListener(\"scroll\", handleScroll);\n});\n\nconst handleScroll = () => {\n  if (window.scrollY + window.innerHeight >= document.body.scrollHeight) {\n    getContent();\n  }\n};\n\nwatchEffect(() => {\n  if (props.type) {\n    getContent();\n  }\n});\n\nconst title = computed(() =>\n    props.type === \"movie\" ? \"All films\" : props.type === \"tv\" ? \"All serials\" : \"\"\n);\n</script>\n"],"names":["props","__props","popularStore","usePopular","currentPage","ref","allContent","loading","getContent","popular","onMounted","handleScroll","watchEffect","title","computed"],"mappings":"6UAUA,MAAMA,EAAQC,EAKd,eAAQ,IAAI,oBAAqBD,EAAM,IAAI,EAC3C,QAAQ,IAAI,oBAAqBA,EAAM,IAAI,kaCU3C,MAAMA,EAAQC,EAIRC,EAAeC,EAAY,EAEjC,IAAIC,EAAcC,EAAI,CAAC,EACnBC,EAAaD,EAAI,CAAE,CAAA,EACnBE,EAAUF,EAAI,EAAK,EAEvB,MAAMG,EAAa,SAAY,CAC7B,GAAG,CAACD,EAAQ,MAAO,CACjBA,EAAQ,MAAQ,GAChB,MAAML,EAAa,WAAW,CAAE,KAAMF,EAAM,KAAM,KAAMI,EAAY,MAAO,EAC3E,MAAMK,EACJT,EAAM,OAAS,QACTE,EAAa,cACbF,EAAM,OAAS,KACXE,EAAa,WACb,GACZI,EAAW,MAAM,KAAK,GAAGG,CAAO,EAChC,WAAW,IAAMF,EAAQ,MAAQ,GAAO,GAAI,EAC5CH,EAAY,OAChB,CACA,EAEAM,EAAU,IAAM,CACd,OAAO,iBAAiB,SAAUC,CAAY,CAChD,CAAC,EAED,MAAMA,EAAe,IAAM,CACrB,OAAO,QAAU,OAAO,aAAe,SAAS,KAAK,cACvDH,EAAY,CAEhB,EAEAI,EAAY,IAAM,CACZZ,EAAM,MACRQ,EAAY,CAEhB,CAAC,EAED,MAAMK,EAAQC,EAAS,IACnBd,EAAM,OAAS,QAAU,YAAcA,EAAM,OAAS,KAAO,cAAgB,EACjF"}